# 大众科普

## 导言

这份文档对社区内常见的图形学知识进行了总结，如果对图形学概念不了解或模糊，请阅读本文。

善用目录来检索你所想要了解的知识，**本文仅供科普，不作实际教学**，如需学习可前往子频道 [**#🤯茶匙的图形学科普**](https://pd.qq.com/s/bk3goy6tk) 寻求建议。

这些文章目前**正在重写**中，目前的版本和重写中可能存在一些疏漏或者格式错误。

## 基本术语
这些名词和概念贯穿全文，了解它们可以帮助你更流畅地阅读。
我们只解释术语的**含义**，**不会**过于涉及其中的算法原理。

### 计算机术语

- **像素** (Pixel)：二维位图的**最小显示**单位。
  - 在实际渲染或计算中，有**子像素**（Sub-Pixel）的概念，因此像素仅为位图的最小显示单位。
- **体素** (Voxel)：对应像素的定义，作为一种三维图形的表示方法，在此类空间中定义的三维图像，体素是**最小坐标**单位。
- **位图**（标量图）：最小单位为像素的图像。计算机中存储的图片**大多是位图**，如 `.jpg` 、 `.png` 、 `.bmp` 等。
- **矢量图**：由**顶点**位置和连接顶点的**线段**信息所组成的图像。 `.svg` 就是其中一种矢量图格式。
- **颜色通道**：在 `RGBA模式` 下由 `R` 、 `G` 、 `B` 、 `A` 四个通道构成**光学三原色**和**不透明度**。在没有特别注释的情况下，我们仅讨论 `RGBA` 情况。
  - `R` ：Red，红色通道。
  - `G` ：Green，绿色通道。
  - `B` ：Blue，蓝色通道。
  - `A` ：Alpha，希腊首字母α，在计算机图形中表示不透明度通道。
- **部分 `代码块内容` 的阅读方法**:
  - `<尖括号>`：由尖括号< >括起来的内容表示在这个区域内应该填写的内容。例：`<文件名>.jpg` ，其中“<文件名>”可以使用任意**符合尖括号内定义**的内容替换，如 `图片.jpg`。

### 游戏术语

- **JE**：Minecraft Java Edition，即Java版游戏，在本文档中，也可以表示只能在**Java版的光影模组**下运行。
- **BE**：Minecraft Bedrock Edition，即基岩版游戏。
  - 这里面也包含了原本的**PE**，即Pocket Edition版本。

自此开始无特殊说明的名词均为JE特有。

- **模组**：MOD，由**第三方提供**的接口在原版游戏基础上运行**由玩家编写的扩展内容**，目前主流的接口有 `Forge` 和 `Fabric`，此外还有 `Fabric` 的分支版本 `Quilt` 以及自 `JE 1.12.2` 停止更新的 `LiteLoader` 。
- **数据包**：Datapack， `JE 1.13` 加入的**由官方支持**的可以修改**世界内数据**的文件包，自 `JE 1.16-pre1` 起可以在创建世界之前加载数据包。
- **整合包**：Modpack，由多个模组整合而成的文件包。
  - 国内的整合包通常是**懒人包**，即：将游戏本体、启动器、模组以及其他配置和资源文件打包，玩家解压之后即可启动游玩。
  - 国外标准的整合包是 `CurseForge` 格式，这种整合包只包含了需要调用的模组的信息，在诸如 `MultiMC` 等启动器上**在线**安装好后即可启动，这通常需要**正版**账户，由启动器在安装过程中同时下载游戏本体。
    - 国内的启动器如 `HMCL` 、 `PCL 2` 、 `BakaXL` 等启动器也均跟进支持了此格式，此外， `HMCL` 还提供了自己的整合包格式。
- **GLSL Shader Core**：光影核心模组，**最早**的JE光影模组。
- **OptiFine**：即高清修复，**简称OF**，老牌JE优化模组。
  - 最早是提供更大纹理分辨率支持的模组，这也是中文名被翻译为高清修复的原因。
  - 在 `JE 1.8` 之后整合了 `GLSL Shader Core` ，开始提供光影支持。
  - 在某一版本中整合了动态光源模组，让世界中所有的光源都可用于照明。
- **Sodium**：意为“钠”，新兴优化模组，旨在优化 `JE 1.14` 后的游戏性能。
  - 伴随钠出现的许多优化模组开始仿效使用元素周期表的元素来命名模组，被玩家们称为元素周期表全家桶。
- **Iris**：新兴光影模组。由于 `OptiFine` 闭源导致很多模组无法兼容，而很多玩家想要在整合包中运行光影，Iris由此而生。
  - 如今Iris已经在着手支持独占功能，并且与 `Sodium` 深度绑定。

### 图形学术语

+ **GLSL类型**：这里列出了常用的GLSL数据类型
  - `int` ：整数。
  - `float` ：浮点数，计算机中可以表示小数的类型。
  - `bool` ：布尔值，可以为 `true`(`1`) 或 `false`(`0`) 。
  - `vecN` ：浮点向量，N可以为 `[1, 4]` 的整数，表示该向量的纬度。
    - `ivecN` 为整数向量，`bvecN` 为布尔值向量。
  - `matN` `matNxM` ：浮点矩阵，N、M可以为 `[2, 4]` 的整数，表示该矩阵的大小。
    - `matN` 表示 `N * N` 大小的矩阵， `matNxM` 表示 `N * M` 大小的矩阵。
  - `samplerND` ：采样用纹理，N可以为 `[1, 3]` ，表示该纹理的纬度。
    - `samplerCube` ：六面包围盒式的采样用纹理。

- **着色器**：即光影。
- **标量**：也称数量，一个**数字**就是一个标量。
- **向量**：也称矢量，在标量的基础上还有**方向**。
  - 在 `GLSL` 中，我们使用形如 `vec3(1.0, 0.2, 3.5)` 的方式来表示三维向量。
- **点乘**：**两个向量**运算为一个标量，我们使用形如 `dot(vecA, vecB)` 的方法来表示点乘。
- **向量/矩阵乘法**：也称左乘，向量和矩阵之间的**有序乘法**。得出的值的类型与**最右侧**的值相同。
  - 左乘的参数存在一些限制，不过这里不做深入。
- **OpenGL**：Open Graphics Library，**开源图形库**，JE所使用的**图形接口**。
  - **GLSL**：(Open) GL Shader Language，**OpenGL着色语言**，顾名思义，它是 `OpenGL` 的着色器语言。
  - 其它的图形接口还有如 `Vulkan` ，它的着色器语言也是 `GLSL` ； `DirectX` ，它的着色器语言是`HLSL` (High-Level Shader Language)。
- **灰度图**：仅由黑白灰组成的图片。
- **深度图**：Depth Map，表观为灰度图，每个像素的亮度说明了该处与摄像机之间的距离。
- **阴影贴图**：Shadow Map，其运作原理大致如下：
  1. 从**光源视角**绘制深度图并**投射到玩家视角**的整个场景作为**最近距离**；
  2. 将其与玩家视角里每个像素**实际到光源的距离**做比较；
  3. 如果实际距离比最近距离更大，就是阴影。
  - 由于其算法特性，**精度**与**贴图大小**直接挂钩，同时会**大幅影响性能表现**。
- **平行光源**：也称无限光。距离玩家**无穷远**处的光源。
  - 太阳和月亮的光照可以近似看作平行光。
- **点光源**：从自身向所有方向发射光照的光源。
  - 在MC中不存在严格意义上的点光源，但是 `OptiFine` 提供的**动态光源**和一些光影提供的**手持光源**可以被认为是点光源。
- **三角形和法线**：Normal，除了前文所述的体素，图形学中还有一种**对应矢量**的渲染方法。
  - 这种方法在渲染中更常用，其依赖于**三角形**或四边形（四边形在现代不常用）。
  - 在计算机图形学中，三角形的三个顶点以**逆时针**顺序所形成的平面就是这个形状的**正面**（约定俗成）
    - **垂直**于这个面**朝外**的方向就是这个三角形的**法线**。
- **法线贴图**：Normal Map，偏移物体表面的朝向，这样就可以影响每个纹理像素的光照强度，从而产生**额外的表面细节**。
  - 在计算机渲染中，我们通常使用法线信息与光源方向做**点乘** `dot(lightDir, Normal)` 来获得该像素的亮度，法线贴图在此时的作用就是偏移了前式中 `Normal` 这个量。所以实际上法线**并没有真正偏移**表面，而只是让该纹理像素的信息被改写。
- **POM**：Parallax Occlusion Mapping，即视差遮蔽映射，简称**视差**。和法线相似，视差贴图通过偏移表面的**深度**来创造原本不存在的凹凸感。
  - 视差也**并没有真正扭曲**表面，只是让玩家从**不同角度**感受到纹理上某些像素被其他像素**遮挡**，从而创造凹凸的观感，这也是其名字中“映射”的含义。
- **PBR**：Physically-Based Rendering，即**基于物理的渲染**。
  - 它是一种着色和渲染的方法，更**准确**地表现**光线**如何与**材料性质**相互作用。
  - 它有一些传统着色中没有考虑到的部分，如**能量守恒**、**光电效应**等。
- **GI**：Global Illumination，即**全局光照**。是直接光照和间接光照的集合。
  - **直接光照**：由光源发射的光照。在**OptiFine光影**中，直接光照的光源**有且仅有**太阳和月亮。
    - 我们把**可以投射阴影贴图**的光源称为直接光源。
    - 更准确地说是太阳和月亮的**方向**。
    - Iris提供了一个新光影特性，让**手持光源**可以投射阴影贴图，因此手持光源也可以算作一个直接光源。
  - **间接光照**：直接光照经过反弹所照亮的不能被光源直接照射到的地方。
- **AO**：Ambient Occlusion，即**环境光遮蔽**。由于性能问题，很多游戏中通常使用了各种**欺诈和近似**来模拟全局光照。为了让**原本应该**或者**似乎应该**为暗处的地方暗下去而产生的技术。
- **SSS**：此简写包含以下两种概念
  - **次表面散射**：Sub-surface Scattering。模拟光线透过物体在其内部反射后射出的效果。
    - **散射**是漫反射、镜面反射、次表面散射的集合。
    - **折射**是散射的一个**特解**。
  - **屏幕空间阴影**：Screen-space Shadow。由于阴影贴图的**精度不足**，容易在物体与地面接触的边缘产生**锯齿和偏移**，屏幕空间阴影就是用于这些地方来**补足**阴影的效果，因此也称为**接触阴影** (Contact Shadow)。

## 计算机图形学（Computer Graphics）

中国科学技术大学图形与几何计算实验室给予了比较明确的定义和解释。
请参阅此文档：[什么是计算机图形学](http://staff.ustc.edu.cn/~lgliu/Resources/CG/What_is_CG.htm)