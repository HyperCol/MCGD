# 着色器 基本概念

参阅：[渲染模组和引擎](terms.md#渲染模组和引擎)

::: danger 未经订正的文档
这篇文档较为古早，可能会有一些错漏，在阅读时请注意甄别。
:::

<!--
重写大纲

着色器的基本概念
光影包和着色器的关系
渲染模组在运行光影中扮演的角色
JE渲染模组和引擎
BE渲染引擎
-->

## 何谓着色器？

我们将从三角形和其他信息传入开始，到输出数据为止的过程称为一个着色器。  
一个着色器中又可以细分为多个阶段，也就是我们常说的顶点着色器、像素着色器等，这里按照通常管线的顺序，简单列举一下每种着色器计算的对象：
- 顶点着色器：计算对象为每一个顶点。它的职责是将三角形从局部空间变换到世界空间。

## 关于 Java 版渲染模组

### 主要渲染模组

- `OptiFine` 是目前主流的光影模组。
  - [OptiFine 主页](https://www.optifine.net/home)
- `Iris` 是 `OptiFine` 的衍生和替代品，其还包含一个 `Forge` 分支 `Oculus` 。
  - [Iris 主页](https://irisshaders.net/)
- `Canvas` 是一个通过兼容原版着色器和深度兼容 `Fabric API` 的光影模组，兼容性极强。
  - [Canvas 的 GitHub 页面](https://github.com/vram-guild/canvas)

### 其他渲染模组

- `Blaze4D` 是一个使用 `Vulkan` 实验性项目，主要目标是在 `Vulkan` 上实现光影渲染。
  - [Blaze4D 的 GitHub 页面](https://github.com/KilnGraphics/Blaze4D)
- `Focal Engine` 由 `Continuum` 团队编写，目前是一个 `OptiFine` 增强模组，并为自己的产品提供加密和联网验证保护，目标是作为独立的渲染模组在 `Vulkan` 上实现光影渲染。
  - [Continuum Graphics 主页](https://continuum.graphics/)
- `Vulkan Mod` 是一个将 MC 的渲染接口换为 `Vulkan` ，借此提高帧数。目前存在较多bug与兼容性问题，并不支持光影。
  - [Vulkan Mod 的 GitHub 页面](https://github.com/xCollateral/VulkanMod)

### 辅助渲染模组

- `AdvancedShader` 是一个 `OptiFine` 的辅助模组，仅在 `1.12.2` 可用。它能够允许用户使用**仅在更高版本中可用**的着色器（如 iterationT 3.0.0）。
  - [AdvancedShader 的 MCMOD 页面](https://www.mcmod.cn/class/7814.html)

## 关于基岩版光影与渲染龙

- **首先明确一个概念： `光影属于着色器` 。无论是哪个 MC 版本，两者都没有明确的分界线。** 基岩版光影基于 Opengl ES 中的 GLSL 或 HLSL 。由于接口限制，基岩版光影可以实现的效果非常少，但仍可以通过一系列稀奇古怪的方法实现物理渲染体系。
- **什么是接口（API）？** 简单来说，需要游戏有 `对应接口` 才能接入对应算法。具象化来说，这就好比给手机（游戏本体）扩展存储（想要达到的光影效果），需要 `SD 卡（算法）`，并且手机需要有  `SD 卡槽（接口）` 才能插入。
- **能否自己加接口？** 基岩版基于 `C++` ，反编译（可以获取到游戏源码，JE的模组接口就是靠的这种方法）极其困难，几乎不可能实现。
- **渲染龙引擎是微软官方在 BE 实装的渲染引擎**。目前，渲染龙已覆盖到了 `Windows` 、`Xbox` 、`Android` 等多平台的基岩版 Minecraft 上，替代了原本第三方着色器的渲染方案。理想情况下，Windows版本能够通过调用 `RTX` 或 `RX 6000 及以上` 系列显卡的光线追踪加速单元以提升光线追踪的效率，而其他平台上的引擎能够起到优化作用。~~意外的是，渲染龙一开始是给 Java 版 Minecraft 设计的，而且渲染龙目前只起到了负优化作用。~~
- **渲染龙的引入并不一定是积极的**。
  - 渲染龙目前在多个平台上表现为负优化，例如操作、渲染延迟等，且帧数并不一定有提升。
  - 渲染龙的算法加密破坏了很多东西，除了光影还有例如 `区块显示`、`红石能量显示`、`亮度显示`、`夜视`、`透视`、`小地图` 等，这些原本都能由第三方光影实现。而它们的消失给一些玩家带来了不少困扰。
  - 官方的光追光影虽然在光追方面技术力高，但其在细节调校方面做的并不如人意，也对主打真实风格的地图与材质作者造成了很大困扰，并且在手机版直接导致了第三方光影集体灭绝。
  - 这也是我们目前为什么反对渲染龙的原因，在此希望大家可以**理性看待渲染龙，而非一味吹捧。**
- 2022 下半年更新： 渲染龙 **已被破解** ，但由于破解团队收到微软的 DMCA 致函（你可以理解为类似律师函，但只是警告），以及新的光影编写方法过于麻烦（需反编译后编辑，再回编译后放到固定文件夹替换相关文件，重启游戏），目前 BE 光影仍然**沉寂**。

### 关于网易的BE后处理着色器

（待编写）
